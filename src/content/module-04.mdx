import Callout from '../components/Callout.astro';
import CommandTable from '../components/CommandTable.astro';

## GitHub es como Google Drive pero para código

Hasta ahora, todo lo que has hecho con Git es **local**: vive solo en tu computador. Si tu disco duro muere mañana, pierdes todo.

**GitHub** es un servicio en la nube donde puedes subir tus repositorios Git. Piensa en la diferencia así:

- **Git** = la herramienta que instalaste en tu computador (la cámara de fotos)
- **GitHub** = un servicio web donde subes tus repositorios (Instagram para código)

GitHub te da dos cosas fundamentales:
1. **Respaldo**: Tu código está seguro en la nube
2. **Colaboración**: Otras personas pueden ver, descargar y contribuir a tu código

---

### Crear tu cuenta en GitHub

Si todavía no tienes cuenta:

1. Ve a [github.com](https://github.com) y haz clic en "Sign up"
2. Usa el **mismo correo** que configuraste en Git (Módulo 2)
3. Elige un nombre de usuario que te guste (será tu identidad como desarrollador)
4. Completa el proceso de verificación

---

### Instalar la app de GitHub (recomendado)

Antes de seguir, instala la **app de GitHub** en tu teléfono. La app te permite aprobar solicitudes de autenticación desde una notificación: cuando necesites autenticarte (por ejemplo con `gh auth login`), GitHub te manda una notificación al teléfono en vez de pedirte tokens o contraseñas.

Dos razones para instalarla ahora:

1. **Seguridad**: la app te permite activar verificación en dos pasos (2FA) usándola como método de aprobación, sin necesidad de configurar SMS ni apps de códigos
2. **Configurar otros computadores es trivial**: si mañana usas otro computador, solo ejecutas `gh auth login` y apruebas desde el teléfono — sin copiar tokens ni generar llaves SSH

**Cómo instalarla:**

1. Descarga **GitHub Mobile** desde la App Store (iOS) o Google Play (Android)
2. Inicia sesión con la cuenta de GitHub que acabas de crear
3. Acepta los permisos de notificaciones

<Callout type="tip" title="Esto te va a servir en unos minutos">
  Cuando lleguemos a `gh auth login` en la sección de autenticación, vas a poder aprobar la conexión directamente desde tu teléfono — sin copiar códigos ni abrir el navegador.
</Callout>

---

### Crear un repositorio en GitHub

Vamos a crear un repositorio vacío en GitHub para subir nuestro proyecto:

1. En GitHub, haz clic en el botón verde **"New"** (o en el `+` de la esquina superior derecha → "New repository")
2. Ponle un nombre (ejemplo: `mi-receta`)
3. **NO** marques "Add a README file" (queremos un repo vacío)
4. **NO** selecciones un `.gitignore` ni licencia por ahora
5. Haz clic en **"Create repository"**

GitHub te mostrará una página con instrucciones. Esas instrucciones son exactamente lo que haremos a continuación.

---

### Configurar autenticación

Para que Git pueda subir código a GitHub, necesitas autenticarte. La forma más fácil para principiantes:

<Callout type="tip" title="Opción recomendada: GitHub CLI (gh)">
  La forma más fácil de autenticarte es con GitHub CLI:

  **Instalar en WSL/Linux (Ubuntu 24.04):**
  ```bash
  sudo apt update
  sudo apt install gh
  ```

  Si `apt` no encuentra el paquete `gh`, visita <a href="https://cli.github.com/" target="_blank" rel="noopener noreferrer">cli.github.com</a> para ver cómo agregar el repositorio oficial de GitHub CLI a tu sistema.

  **Instalar en macOS:**
  ```bash
  brew install gh
  ```

  **Autenticarte:**
  ```bash
  gh auth login
  ```

  Sigue las instrucciones en pantalla: elige "GitHub.com", "HTTPS", y "Login with a web browser". Se abrirá tu navegador para autorizar.

  Si instalaste la **app de GitHub** en tu teléfono, la autorización te llega como notificación — solo aprueba desde ahí y listo.
</Callout>

<Callout type="info" title="Alternativa: Token personal (HTTPS)">
  Si prefieres no instalar `gh`, puedes crear un token personal:

  1. En GitHub → Settings → Developer settings → Personal access tokens → Tokens (classic)
  2. "Generate new token (classic)"
  3. Dale un nombre, selecciona el permiso `repo`, y genera el token
  4. **Copia el token** (solo lo ves una vez)
  5. Cuando Git te pida contraseña, usa el token en vez de tu contraseña

  También puedes guardar el token para no tenerlo que poner cada vez:
  ```bash
  git config --global credential.helper store
  ```

  **Advertencia:** `credential.helper store` guarda tu token en un archivo de texto sin encriptar en tu computador (`~/.git-credentials`). Es cómodo para practicar, pero en un entorno profesional o compartido es mejor usar `gh auth login` o un gestor de credenciales seguro.
</Callout>

<Callout type="info" title="SSH es más avanzado">
  Existe otra forma de autenticación llamada SSH que es más segura y no requiere poner contraseña cada vez. No la cubrimos aquí, pero funciona igual de bien. Si te interesa, puedes buscarlo en la documentación oficial de GitHub más adelante.
</Callout>

---

### `git remote add origin` — Conectar tu carpeta con la nube

Ahora necesitamos decirle a Git local: "este proyecto se conecta con este repositorio de GitHub". Eso se hace con `git remote`.

```bash
# Conectar tu repo local con GitHub
git remote add origin https://github.com/tu-usuario/mi-receta.git
```

¿Qué significa cada parte?
- `git remote add`: "agrega una conexión remota"
- `origin`: es un **nombre** para esa conexión (es convención usar "origin" para la principal)
- `https://github.com/...`: la URL de tu repositorio en GitHub

Para verificar que la conexión se creó:

```bash
git remote -v
# origin  https://github.com/tu-usuario/mi-receta.git (fetch)
# origin  https://github.com/tu-usuario/mi-receta.git (push)
```

Si ves las dos líneas (fetch y push), la conexión está lista.

---

### `git push -u origin main` — Subir tu trabajo a la nube

¡El momento de la verdad! `git push` sube tus commits locales a GitHub.

```bash
# Primera vez: necesitas el -u para establecer la conexión
git push -u origin main
# Enumerating objects: 6, done.
# Counting objects: 100% (6/6), done.
# Writing objects: 100% (6/6), 523 bytes | 523.00 KiB/s, done.
# Total 6 (delta 0), reused 0 (delta 0)
# To https://github.com/tu-usuario/mi-receta.git
#  * [new branch]      main -> main
# Branch 'main' set up to track remote branch 'main' from 'origin'.
```

¿Qué significa `-u`? Le dice a Git "recuerda que `main` local se conecta con `main` en GitHub". Después de la primera vez, solo necesitas:

```bash
git push
# (sin -u, sin origin, sin main, Git ya recuerda)
```

¡Ve a GitHub en tu navegador y actualiza la página de tu repositorio! Deberías ver tus archivos ahí.

---

### `git clone` — Descargar un proyecto de internet

`git clone` descarga una copia completa de un repositorio de GitHub a tu computador. Ya viene con todo configurado: la conexión remota, el historial de commits, todo.

```bash
# Clonar un repositorio
git clone https://github.com/usuario/nombre-repo.git
# Cloning into 'nombre-repo'...
# remote: Enumerating objects: 20, done.
# ...

# Entrar al repo clonado
cd nombre-repo

# Ya tiene todo configurado
git remote -v
# origin  https://github.com/usuario/nombre-repo.git (fetch)
# origin  https://github.com/usuario/nombre-repo.git (push)

git log --oneline
# (todo el historial del proyecto)
```

---

### Flujo completo: de la idea a GitHub

Este es el flujo más importante que aprenderás. Conecta todo lo que viste en el Módulo 3 (repositorio local) con GitHub. Sigue cada paso en orden:

**Paso 1: Crear la carpeta del proyecto e inicializar Git**

```bash
mkdir mi-proyecto-web && cd mi-proyecto-web
git init
```

**Paso 2: Crear `.gitignore` y hacer el primer commit**

Siempre crea el `.gitignore` antes de empezar a trabajar (como aprendiste en el Módulo 3):

```bash
cat > .gitignore << 'EOF'
.DS_Store
Thumbs.db
.env
node_modules/
*.tmp
*.log
EOF

git add .gitignore
git commit -m "Agrega .gitignore"
```

**Paso 3: Crear los archivos del proyecto y hacer el segundo commit**

```bash
echo "<!DOCTYPE html><html><body><h1>Hola Mundo</h1></body></html>" > index.html
echo "body { font-family: sans-serif; }" > estilos.css

git add index.html estilos.css
git commit -m "Crea estructura básica del sitio web"
```

**Paso 4: Crear un repositorio vacío en GitHub**

1. En GitHub, haz clic en el botón **"+"** (esquina superior derecha) → **"New repository"**
2. Ponle el nombre **`mi-proyecto-web`**
3. **NO** marques "Add a README file"
4. **NO** selecciones un `.gitignore` template
5. **NO** selecciones una licencia
6. Haz clic en **"Create repository"**

GitHub te mostrará una página con instrucciones. Los comandos que necesitas son los de la sección "push an existing repository".

<Callout type="warning" title="¡Crea el repo vacío!">
  Si marcas la casilla "Add a README file", GitHub creará un commit inicial que tu repo local no tiene. Cuando intentes hacer push, tendrás un conflicto. Siempre crea el repo **sin ningún archivo** cuando vas a subir un proyecto existente.
</Callout>

**Paso 5: Autenticarte (si no lo has hecho antes)**

```bash
gh auth login
# Sigue las instrucciones: GitHub.com → HTTPS → Login with a web browser
```

Si ya te autenticaste antes, este paso no es necesario.

**Paso 6: Conectar tu repo local con GitHub**

```bash
git remote add origin https://github.com/tu-usuario/mi-proyecto-web.git

# Verificar la conexión
git remote -v
# origin  https://github.com/tu-usuario/mi-proyecto-web.git (fetch)
# origin  https://github.com/tu-usuario/mi-proyecto-web.git (push)
```

**Paso 7: Subir tu código a GitHub por primera vez**

```bash
git push -u origin main
# Enumerating objects: 8, done.
# ...
# To https://github.com/tu-usuario/mi-proyecto-web.git
#  * [new branch]      main -> main
# Branch 'main' set up to track remote branch 'main' from 'origin'.
```

El `-u` le dice a Git "recuerda que `main` local se conecta con `main` en GitHub".

**Paso 8: Verificar en GitHub**

Abre tu navegador, ve a `github.com/tu-usuario/mi-proyecto-web` y actualiza la página. Deberías ver tus archivos (`index.html`, `estilos.css`, `.gitignore`) y tus commits.

**Paso 9: Hacer un cambio, commit y push (flujo del día a día)**

A partir de ahora, el flujo diario es mucho más simple:

```bash
# Editar un archivo
echo "<p>Bienvenido a mi sitio</p>" >> index.html

# El flujo de siempre: status → add → commit
git add index.html
git commit -m "Agrega mensaje de bienvenida"

# Subir a GitHub (ya no necesitas -u ni origin ni main)
git push
```

¡Eso es todo! A partir del primer push con `-u`, solo necesitas `git push` para subir tus nuevos commits.

---

### Tabla resumen

<CommandTable commands={[
  { command: "git remote add origin <URL>", description: "Conectar repo local con GitHub" },
  { command: "git remote -v", description: "Ver las conexiones remotas configuradas" },
  { command: "git push -u origin main", description: "Subir código a GitHub (primera vez)" },
  { command: "git push", description: "Subir código a GitHub (siguientes veces)" },
  { command: "git clone <URL>", description: "Descargar un repositorio de GitHub" },
]} />

---

### Ejercicios del módulo

**Ejercicio 1:** Crea un repositorio vacío en GitHub (sin README, sin .gitignore). Anota la URL que te da.

**Ejercicio 2:** Conecta tu repo local de práctica con GitHub:

```bash
git remote add origin https://github.com/tu-usuario/tu-repo.git
git remote -v
# ¿Ves las dos líneas (fetch y push)?
```

**Ejercicio 3:** Sube tu trabajo con `git push -u origin main`:

```bash
git push -u origin main
```

**Ejercicio 4:** Ve a GitHub en tu navegador y verifica que tus archivos están ahí. ¿Puedes ver los commits? ¿Los archivos?

**Ejercicio 5:** Clona un repositorio público a tu máquina. Puedes clonar el repositorio de este mismo curso:

```bash
cd ~
git clone https://github.com/paulovillarroel/curso-git-github.git curso-git-github-copia
cd curso-git-github-copia
ls
git log --oneline
```

<Callout type="info" title="¡Tu código está en la nube!">
  Ahora tienes un respaldo de tu trabajo en GitHub. Si tu computador se pierde, tu código sigue a salvo. Además, cualquier persona puede ver y clonar tu repositorio público. ¡Eso es el poder de GitHub!
</Callout>
